---

title: dailyList


keywords: fastai
sidebar: home_sidebar

summary: "Parse the SEC's archived daily list of filings."
description: "Parse the SEC's archived daily list of filings."
nb_path: "02_dailyList.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_dailyList.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Download and parse the SEC's archived daily list of filings:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="getQStr" class="doc_header"><code>getQStr</code><a href="https://github.com/ikedim01/secscan/tree/master/secscan/dailyList.py#L19" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>getQStr</code>(<strong><code>dateStr</code></strong>)</p>
</blockquote>
<p>Converts a date in YYYYMMDD format to YYYY/QTRn/
where n is the quarter number from 1 to 4."</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="getSecDailyIndexUrls" class="doc_header"><code>getSecDailyIndexUrls</code><a href="https://github.com/ikedim01/secscan/tree/master/secscan/dailyList.py#L26" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>getSecDailyIndexUrls</code>(<strong><code>dateStr</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="getDailyFList" class="doc_header"><code>getDailyFList</code><a href="https://github.com/ikedim01/secscan/tree/master/secscan/dailyList.py#L36" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>getDailyFList</code>(<strong><code>d</code></strong>, <strong><code>listIndexCache</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Returns a list of SEC filed forms:
    [(cik, cikName, formType, fileDate, accNo), ... ]
for the given date or ISO date string, retrieved from
the SEC daily index.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Test downloading and parsing SEC's archived daily list of filings:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">((</span><span class="n">getQStr</span><span class="p">(</span><span class="s1">&#39;20200101&#39;</span><span class="p">),</span><span class="n">getQStr</span><span class="p">(</span><span class="s1">&#39;20200401&#39;</span><span class="p">),</span><span class="n">getQStr</span><span class="p">(</span><span class="s1">&#39;20201201&#39;</span><span class="p">))</span>
        <span class="o">==</span> <span class="p">(</span><span class="s1">&#39;2020/QTR1/&#39;</span><span class="p">,</span><span class="s1">&#39;2020/QTR2/&#39;</span><span class="p">,</span><span class="s1">&#39;2020/QTR4/&#39;</span><span class="p">)),</span> <span class="s2">&quot;quarter string calc&quot;</span>
<span class="k">assert</span> <span class="p">(</span><span class="n">getSecDailyIndexUrls</span><span class="p">(</span><span class="s1">&#39;20201201&#39;</span><span class="p">)</span>
        <span class="o">==</span><span class="p">(</span><span class="s1">&#39;/Archives/edgar/daily-index/2020/QTR4/master.20201201.idx&#39;</span><span class="p">,</span>
           <span class="s1">&#39;/Archives/edgar/daily-index/2020/QTR4/index.json&#39;</span><span class="p">)),</span> <span class="s2">&quot;daily index URL&quot;</span>
<span class="k">assert</span> <span class="n">getDailyFList</span><span class="p">(</span><span class="s1">&#39;20210531&#39;</span><span class="p">)</span><span class="o">==</span><span class="p">[],</span><span class="s2">&quot;daily list holiday test&quot;</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">getDailyFList</span><span class="p">(</span><span class="s1">&#39;20201201&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="o">==</span><span class="mi">3464</span> <span class="ow">and</span> <span class="n">r</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span> <span class="p">(</span><span class="s1">&#39;97745&#39;</span><span class="p">,</span> <span class="s1">&#39;THERMO FISHER SCIENTIFIC INC.&#39;</span><span class="p">,</span>
                                 <span class="s1">&#39;8-K&#39;</span><span class="p">,</span> <span class="s1">&#39;20201201&#39;</span><span class="p">,</span> <span class="s1">&#39;0000097745-20-000055&#39;</span><span class="p">),</span> <span class="s2">&quot;daily list regular day test&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>### list index 64 HOLIDAY ### list index 61 filings for 20201201: 3464 </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Form classes (how to specify groups of form types):</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="isInFormClass" class="doc_header"><code>isInFormClass</code><a href="https://github.com/ikedim01/secscan/tree/master/secscan/dailyList.py#L90" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>isInFormClass</code>(<strong><code>formClass</code></strong>, <strong><code>formType</code></strong>)</p>
</blockquote>
<p>Says if formType is in formClass, where formClass can be one of the following:</p>

<pre><code>- None or '' - includes all formTypes
- namedFormClass - one of the ones above
- other string - includes formTypes starting with that string
- regex - includes matching formTypes</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Test form classes:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="p">((</span><span class="n">isInFormClass</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="s1">&#39;10-Q&#39;</span><span class="p">),</span><span class="n">isInFormClass</span><span class="p">(</span><span class="s1">&#39;10&#39;</span><span class="p">,</span><span class="s1">&#39;10-Q&#39;</span><span class="p">),</span><span class="n">isInFormClass</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="s1">&#39;10-Q&#39;</span><span class="p">))</span>
        <span class="o">==</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">,</span><span class="kc">False</span><span class="p">)),</span> <span class="s2">&quot;string form classes&quot;</span>
<span class="k">assert</span> <span class="p">((</span><span class="n">isInFormClass</span><span class="p">(</span><span class="s1">&#39;INVESTOR&#39;</span><span class="p">,</span><span class="s1">&#39;13F-HR&#39;</span><span class="p">),</span><span class="n">isInFormClass</span><span class="p">(</span><span class="s1">&#39;investor&#39;</span><span class="p">,</span><span class="s1">&#39;10-Q&#39;</span><span class="p">))</span>
        <span class="o">==</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="kc">False</span><span class="p">)),</span> <span class="s2">&quot;names form classes&quot;</span>
<span class="k">assert</span> <span class="p">((</span><span class="n">isInFormClass</span><span class="p">(</span><span class="n">noPeriodFormTypes</span><span class="p">,</span><span class="s1">&#39;SC 13D&#39;</span><span class="p">),</span><span class="n">isInFormClass</span><span class="p">(</span><span class="n">noPeriodFormTypes</span><span class="p">,</span><span class="s1">&#39;10-Q&#39;</span><span class="p">))</span>
        <span class="o">==</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span><span class="kc">False</span><span class="p">)),</span> <span class="s2">&quot;regex form class&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The dailyList class maintains a trio of dicts:</p>

<pre><code>    dl: dateStr -&gt; list of filings [(cik, formType, accNo, fDate), ... ]
    cikNames: cik -&gt; (name, latestDateStr)
    cikOldNames: cik -&gt; [name1, name2, ...]</code></pre>
<p>using the SEC's archived daily list of filings.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="findCikName" class="doc_header"><code>findCikName</code><a href="https://github.com/ikedim01/secscan/tree/master/secscan/dailyList.py#L111" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>findCikName</code>(<strong><code>cikName</code></strong>, <strong><code>oldNames</code></strong>)</p>
</blockquote>
<p>Checks if a CIK name already appears in a list of old names (case insensitive).
Returns the position if it appears, else -1.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="dailyList" class="doc_header"><code>class</code> <code>dailyList</code><a href="https://github.com/ikedim01/secscan/tree/master/secscan/dailyList.py#L122" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>dailyList</code>(<strong><code>dlDir</code></strong>=<em><code>'C:\\Users\\ikedi\\secData\\dlMaps'</code></em>, <strong><code>startD</code></strong>=<em><code>None</code></em>, <strong><code>endD</code></strong>=<em><code>None</code></em>, <strong><code>fSuff</code></strong>=<em><code>'m.pkl'</code></em>, <strong>**<code>pickle_kwargs</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="loadAndUpdateDL" class="doc_header"><code>loadAndUpdateDL</code><a href="https://github.com/ikedim01/secscan/tree/master/secscan/dailyList.py#L253" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>loadAndUpdateDL</code>(<strong><code>dlDir</code></strong>=<em><code>'C:\\Users\\ikedi\\secData\\dlMaps'</code></em>, <strong><code>startD</code></strong>=<em><code>None</code></em>, <strong><code>endD</code></strong>=<em><code>None</code></em>, <strong><code>uStartD</code></strong>=<em><code>None</code></em>, <strong><code>uEndD</code></strong>=<em><code>None</code></em>, <strong><code>fSuff</code></strong>=<em><code>'m.pkl'</code></em>, <strong><code>dirtyMap</code></strong>=<em><code>None</code></em>, <strong>**<code>pickle_kwargs</code></strong>)</p>
</blockquote>
<p>Creates a dailyList object and loads lists for the date range [startD..endD), along with
the full CIK name maps. By default (startD=None, endD=None) loads all dates present.
Then updates to reflect the filings for dates between uStartD (inclusive)
and uEndD (exclusive), and saves. If uStartD is None, uses the last date already
in the loaded dailyList, or the start of the current year if the loaded dailyList
is empty. If uEndD is None, uses today.
Use startD='empty' to start with an empty dailyList.</p>
<p>A dailyList can be initialized for a date range starting from an empty directory by:
    dl = loadAndUpdateDL(dlDir=emptyDir, startD='empty', uStartD=drangeStart, uEndD=drangeEnd)
An dailyList in an existing directory can be updated up to and including yesterday by:
    dl = loadAndUpdateDL(dlDir=existingDir)</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Test dailyList class:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tdl</span> <span class="o">=</span> <span class="n">dailyList</span><span class="p">(</span><span class="n">startD</span><span class="o">=</span><span class="s1">&#39;empty&#39;</span><span class="p">)</span>
<span class="n">tdl</span><span class="o">.</span><span class="n">updateForDays</span><span class="p">(</span><span class="s1">&#39;20210611&#39;</span><span class="p">,</span><span class="s1">&#39;20210612&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">dl</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">dl</span><span class="p">[</span><span class="s1">&#39;20210611&#39;</span><span class="p">])</span><span class="o">==</span><span class="mi">4263</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">cikNames</span><span class="p">)</span><span class="o">==</span><span class="mi">2821</span>
        <span class="ow">and</span> <span class="n">tdl</span><span class="o">.</span><span class="n">dl</span><span class="p">[</span><span class="s1">&#39;20210611&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="p">(</span><span class="s1">&#39;1000045&#39;</span><span class="p">,</span> <span class="s1">&#39;8-K&#39;</span><span class="p">,</span> <span class="s1">&#39;0001564590-21-032560&#39;</span><span class="p">,</span> <span class="s1">&#39;20210611&#39;</span><span class="p">)</span>
       <span class="p">),</span> <span class="s2">&quot;initializing daily list&quot;</span>

<span class="n">tdl</span><span class="o">.</span><span class="n">updateForDays</span><span class="p">(</span><span class="s1">&#39;20210611&#39;</span><span class="p">,</span><span class="s1">&#39;20210615&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">dl</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span>
        <span class="ow">and</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">dl</span><span class="p">[</span><span class="n">dStr</span><span class="p">])</span> <span class="k">for</span> <span class="n">dStr</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;20210611&#39;</span><span class="p">,</span><span class="s1">&#39;20210612&#39;</span><span class="p">,</span><span class="s1">&#39;20210613&#39;</span><span class="p">,</span><span class="s1">&#39;20210614&#39;</span><span class="p">]]</span><span class="o">==</span><span class="p">[</span><span class="mi">4263</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">4379</span><span class="p">]</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">cikNames</span><span class="p">)</span><span class="o">==</span><span class="mi">5063</span>
        <span class="ow">and</span> <span class="n">tdl</span><span class="o">.</span><span class="n">dl</span><span class="p">[</span><span class="s1">&#39;20210614&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="p">(</span><span class="s1">&#39;1000230&#39;</span><span class="p">,</span> <span class="s1">&#39;10-Q&#39;</span><span class="p">,</span> <span class="s1">&#39;0001437749-21-014672&#39;</span><span class="p">,</span> <span class="s1">&#39;20210614&#39;</span><span class="p">)</span>
       <span class="p">),</span> <span class="s2">&quot;continuing daily list maps&quot;</span>

<span class="k">assert</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">getAllFormTypes</span><span class="p">())</span><span class="o">==</span><span class="mi">157</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">getCiksFiling</span><span class="p">())</span><span class="o">==</span><span class="mi">5063</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">getCiksFiling</span><span class="p">(</span><span class="s1">&#39;financial&#39;</span><span class="p">))</span><span class="o">==</span><span class="mi">110</span>
        <span class="ow">and</span> <span class="nb">min</span><span class="p">(</span><span class="n">tdl</span><span class="o">.</span><span class="n">getCiksFiling</span><span class="p">(</span><span class="s1">&#39;financial&#39;</span><span class="p">))</span><span class="o">==</span><span class="s1">&#39;1000230&#39;</span><span class="p">),</span> <span class="s2">&quot;checking daily list filings/CIKs&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>20210611 ### list index 64 filings for 20210611: 4263 * 20210614 ### list index 64 filings for 20210614: 4379 * 20210613 WEEKEND 20210612 WEEKEND SKIP20210611 </pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

